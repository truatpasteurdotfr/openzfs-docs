

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>zfs-recv.8 &mdash; OpenZFS  documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/theme_overrides.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/mandoc.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="zfs-redact.8" href="zfs-redact.8.html" />
    <link rel="prev" title="zfs-receive.8" href="zfs-receive.8.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #29667e" >
          

          
            <a href="../../index.html">
          

          
            
            <img src="../../_static/logo_main.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../Getting Started/index.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Project and Community/index.html">Project and Community</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Developer Resources/index.html">Developer Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Performance and Tuning/index.html">Performance and Tuning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Basic Concepts/index.html">Basic Concepts</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Man Pages</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../1/index.html">User Commands (1)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../5/index.html">File Formats and Conventions (5)</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">System Administration Commands (8)</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="fsck.zfs.8.html">fsck.zfs.8</a></li>
<li class="toctree-l3"><a class="reference internal" href="mount.zfs.8.html">mount.zfs.8</a></li>
<li class="toctree-l3"><a class="reference internal" href="vdev_id.8.html">vdev_id.8</a></li>
<li class="toctree-l3"><a class="reference internal" href="zdb.8.html">zdb.8</a></li>
<li class="toctree-l3"><a class="reference internal" href="zfs-allow.8.html">zfs-allow.8</a></li>
<li class="toctree-l3"><a class="reference internal" href="zfs-bookmark.8.html">zfs-bookmark.8</a></li>
<li class="toctree-l3"><a class="reference internal" href="zfs-change-key.8.html">zfs-change-key.8</a></li>
<li class="toctree-l3"><a class="reference internal" href="zfs-clone.8.html">zfs-clone.8</a></li>
<li class="toctree-l3"><a class="reference internal" href="zfs-create.8.html">zfs-create.8</a></li>
<li class="toctree-l3"><a class="reference internal" href="zfs-destroy.8.html">zfs-destroy.8</a></li>
<li class="toctree-l3"><a class="reference internal" href="zfs-diff.8.html">zfs-diff.8</a></li>
<li class="toctree-l3"><a class="reference internal" href="zfs-get.8.html">zfs-get.8</a></li>
<li class="toctree-l3"><a class="reference internal" href="zfs-groupspace.8.html">zfs-groupspace.8</a></li>
<li class="toctree-l3"><a class="reference internal" href="zfs-hold.8.html">zfs-hold.8</a></li>
<li class="toctree-l3"><a class="reference internal" href="zfs-inherit.8.html">zfs-inherit.8</a></li>
<li class="toctree-l3"><a class="reference internal" href="zfs-jail.8.html">zfs-jail.8</a></li>
<li class="toctree-l3"><a class="reference internal" href="zfs-list.8.html">zfs-list.8</a></li>
<li class="toctree-l3"><a class="reference internal" href="zfs-load-key.8.html">zfs-load-key.8</a></li>
<li class="toctree-l3"><a class="reference internal" href="zfs-mount.8.html">zfs-mount.8</a></li>
<li class="toctree-l3"><a class="reference internal" href="zfs-program.8.html">zfs-program.8</a></li>
<li class="toctree-l3"><a class="reference internal" href="zfs-project.8.html">zfs-project.8</a></li>
<li class="toctree-l3"><a class="reference internal" href="zfs-projectspace.8.html">zfs-projectspace.8</a></li>
<li class="toctree-l3"><a class="reference internal" href="zfs-promote.8.html">zfs-promote.8</a></li>
<li class="toctree-l3"><a class="reference internal" href="zfs-receive.8.html">zfs-receive.8</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">zfs-recv.8</a></li>
<li class="toctree-l3"><a class="reference internal" href="zfs-redact.8.html">zfs-redact.8</a></li>
<li class="toctree-l3"><a class="reference internal" href="zfs-release.8.html">zfs-release.8</a></li>
<li class="toctree-l3"><a class="reference internal" href="zfs-rename.8.html">zfs-rename.8</a></li>
<li class="toctree-l3"><a class="reference internal" href="zfs-rollback.8.html">zfs-rollback.8</a></li>
<li class="toctree-l3"><a class="reference internal" href="zfs-send.8.html">zfs-send.8</a></li>
<li class="toctree-l3"><a class="reference internal" href="zfs-set.8.html">zfs-set.8</a></li>
<li class="toctree-l3"><a class="reference internal" href="zfs-share.8.html">zfs-share.8</a></li>
<li class="toctree-l3"><a class="reference internal" href="zfs-snapshot.8.html">zfs-snapshot.8</a></li>
<li class="toctree-l3"><a class="reference internal" href="zfs-unallow.8.html">zfs-unallow.8</a></li>
<li class="toctree-l3"><a class="reference internal" href="zfs-unjail.8.html">zfs-unjail.8</a></li>
<li class="toctree-l3"><a class="reference internal" href="zfs-unload-key.8.html">zfs-unload-key.8</a></li>
<li class="toctree-l3"><a class="reference internal" href="zfs-unmount.8.html">zfs-unmount.8</a></li>
<li class="toctree-l3"><a class="reference internal" href="zfs-upgrade.8.html">zfs-upgrade.8</a></li>
<li class="toctree-l3"><a class="reference internal" href="zfs-userspace.8.html">zfs-userspace.8</a></li>
<li class="toctree-l3"><a class="reference internal" href="zfs-wait.8.html">zfs-wait.8</a></li>
<li class="toctree-l3"><a class="reference internal" href="zfs.8.html">zfs.8</a></li>
<li class="toctree-l3"><a class="reference internal" href="zfs_ids_to_path.8.html">zfs_ids_to_path.8</a></li>
<li class="toctree-l3"><a class="reference internal" href="zfsconcepts.8.html">zfsconcepts.8</a></li>
<li class="toctree-l3"><a class="reference internal" href="zfsprops.8.html">zfsprops.8</a></li>
<li class="toctree-l3"><a class="reference internal" href="zgenhostid.8.html">zgenhostid.8</a></li>
<li class="toctree-l3"><a class="reference internal" href="zinject.8.html">zinject.8</a></li>
<li class="toctree-l3"><a class="reference internal" href="zpool-add.8.html">zpool-add.8</a></li>
<li class="toctree-l3"><a class="reference internal" href="zpool-attach.8.html">zpool-attach.8</a></li>
<li class="toctree-l3"><a class="reference internal" href="zpool-checkpoint.8.html">zpool-checkpoint.8</a></li>
<li class="toctree-l3"><a class="reference internal" href="zpool-clear.8.html">zpool-clear.8</a></li>
<li class="toctree-l3"><a class="reference internal" href="zpool-create.8.html">zpool-create.8</a></li>
<li class="toctree-l3"><a class="reference internal" href="zpool-destroy.8.html">zpool-destroy.8</a></li>
<li class="toctree-l3"><a class="reference internal" href="zpool-detach.8.html">zpool-detach.8</a></li>
<li class="toctree-l3"><a class="reference internal" href="zpool-events.8.html">zpool-events.8</a></li>
<li class="toctree-l3"><a class="reference internal" href="zpool-export.8.html">zpool-export.8</a></li>
<li class="toctree-l3"><a class="reference internal" href="zpool-get.8.html">zpool-get.8</a></li>
<li class="toctree-l3"><a class="reference internal" href="zpool-history.8.html">zpool-history.8</a></li>
<li class="toctree-l3"><a class="reference internal" href="zpool-import.8.html">zpool-import.8</a></li>
<li class="toctree-l3"><a class="reference internal" href="zpool-initialize.8.html">zpool-initialize.8</a></li>
<li class="toctree-l3"><a class="reference internal" href="zpool-iostat.8.html">zpool-iostat.8</a></li>
<li class="toctree-l3"><a class="reference internal" href="zpool-labelclear.8.html">zpool-labelclear.8</a></li>
<li class="toctree-l3"><a class="reference internal" href="zpool-list.8.html">zpool-list.8</a></li>
<li class="toctree-l3"><a class="reference internal" href="zpool-offline.8.html">zpool-offline.8</a></li>
<li class="toctree-l3"><a class="reference internal" href="zpool-online.8.html">zpool-online.8</a></li>
<li class="toctree-l3"><a class="reference internal" href="zpool-reguid.8.html">zpool-reguid.8</a></li>
<li class="toctree-l3"><a class="reference internal" href="zpool-remove.8.html">zpool-remove.8</a></li>
<li class="toctree-l3"><a class="reference internal" href="zpool-reopen.8.html">zpool-reopen.8</a></li>
<li class="toctree-l3"><a class="reference internal" href="zpool-replace.8.html">zpool-replace.8</a></li>
<li class="toctree-l3"><a class="reference internal" href="zpool-resilver.8.html">zpool-resilver.8</a></li>
<li class="toctree-l3"><a class="reference internal" href="zpool-scrub.8.html">zpool-scrub.8</a></li>
<li class="toctree-l3"><a class="reference internal" href="zpool-set.8.html">zpool-set.8</a></li>
<li class="toctree-l3"><a class="reference internal" href="zpool-split.8.html">zpool-split.8</a></li>
<li class="toctree-l3"><a class="reference internal" href="zpool-status.8.html">zpool-status.8</a></li>
<li class="toctree-l3"><a class="reference internal" href="zpool-sync.8.html">zpool-sync.8</a></li>
<li class="toctree-l3"><a class="reference internal" href="zpool-trim.8.html">zpool-trim.8</a></li>
<li class="toctree-l3"><a class="reference internal" href="zpool-upgrade.8.html">zpool-upgrade.8</a></li>
<li class="toctree-l3"><a class="reference internal" href="zpool-wait.8.html">zpool-wait.8</a></li>
<li class="toctree-l3"><a class="reference internal" href="zpool.8.html">zpool.8</a></li>
<li class="toctree-l3"><a class="reference internal" href="zpool_influxdb.8.html">zpool_influxdb.8</a></li>
<li class="toctree-l3"><a class="reference internal" href="zpoolconcepts.8.html">zpoolconcepts.8</a></li>
<li class="toctree-l3"><a class="reference internal" href="zpoolprops.8.html">zpoolprops.8</a></li>
<li class="toctree-l3"><a class="reference internal" href="zstream.8.html">zstream.8</a></li>
<li class="toctree-l3"><a class="reference internal" href="zstreamdump.8.html">zstreamdump.8</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../msg/index.html">ZFS Messages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../License.html">License</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">OpenZFS</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../index.html">Man Pages</a> &raquo;</li>
        
          <li><a href="index.html">System Administration Commands (8)</a> &raquo;</li>
        
      <li>zfs-recv.8</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/openzfs/openzfs-docs/blob/master/docs/man/8/zfs-recv.8.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="zfs-recv-8">
<h1>zfs-recv.8<a class="headerlink" href="#zfs-recv-8" title="Permalink to this headline">¶</a></h1>
<div class="man_container"><table class="head">
  <tr>
    <td class="head-ltitle">ZFS-RECEIVE(8)</td>
    <td class="head-vol">System Manager's Manual</td>
    <td class="head-rtitle">ZFS-RECEIVE(8)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
<b class="Nm" title="Nm">zfs-receive</b> &#x2014;
  <span class="Nd" title="Nd">Creates a snapshot whose contents are as specified
  in the stream provided on standard input.</span>
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<table class="Nm">
  <tr>
    <td><b class="Nm" title="Nm">zfs</b></td>
    <td><b class="Cm" title="Cm">receive</b>
      [<span class="Op"><b class="Fl" title="Fl">-FhMnsuv</b></span>]
      [<span class="Op"><b class="Fl" title="Fl">-o</b>
      <b class="Sy" title="Sy">origin</b>=<var class="Ar" title="Ar">snapshot</var></span>]
      [<span class="Op"><b class="Fl" title="Fl">-o</b>
      <var class="Ar" title="Ar">property</var>=<var class="Ar" title="Ar">value</var></span>]
      [<span class="Op"><b class="Fl" title="Fl">-x</b>
      <var class="Ar" title="Ar">property</var></span>]
      <var class="Ar" title="Ar">filesystem</var>|<var class="Ar" title="Ar">volume</var>|<var class="Ar" title="Ar">snapshot</var></td>
  </tr>
</table>
<br/>
<table class="Nm">
  <tr>
    <td><b class="Nm" title="Nm">zfs</b></td>
    <td><b class="Cm" title="Cm">receive</b>
      [<span class="Op"><b class="Fl" title="Fl">-FhMnsuv</b></span>]
      [<span class="Op"><b class="Fl" title="Fl">-d</b>|<b class="Fl" title="Fl">-e</b></span>]
      [<span class="Op"><b class="Fl" title="Fl">-o</b>
      <b class="Sy" title="Sy">origin</b>=<var class="Ar" title="Ar">snapshot</var></span>]
      [<span class="Op"><b class="Fl" title="Fl">-o</b>
      <var class="Ar" title="Ar">property</var>=<var class="Ar" title="Ar">value</var></span>]
      [<span class="Op"><b class="Fl" title="Fl">-x</b>
      <var class="Ar" title="Ar">property</var></span>]
      <var class="Ar" title="Ar">filesystem</var></td>
  </tr>
</table>
<br/>
<table class="Nm">
  <tr>
    <td><b class="Nm" title="Nm">zfs</b></td>
    <td><b class="Cm" title="Cm">receive</b> <b class="Fl" title="Fl">-A</b>
      <var class="Ar" title="Ar">filesystem</var>|<var class="Ar" title="Ar">volume</var></td>
  </tr>
</table>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<dl class="Bl-tag" style="margin-left: 3.00ex;">
  <dt class="It-tag" style="margin-left: -3.00ex;"><b class="Nm" title="Nm">zfs</b>
    <b class="Cm" title="Cm">receive</b>
    [<span class="Op"><b class="Fl" title="Fl">-FhMnsuv</b></span>]
    [<span class="Op"><b class="Fl" title="Fl">-o</b>
    <b class="Sy" title="Sy">origin</b>=<var class="Ar" title="Ar">snapshot</var></span>]
    [<span class="Op"><b class="Fl" title="Fl">-o</b>
    <var class="Ar" title="Ar">property</var>=<var class="Ar" title="Ar">value</var></span>]
    [<span class="Op"><b class="Fl" title="Fl">-x</b>
    <var class="Ar" title="Ar">property</var></span>]
    <var class="Ar" title="Ar">filesystem</var>|<var class="Ar" title="Ar">volume</var>|<var class="Ar" title="Ar">snapshot</var></dt>
  <dd class="It-tag" style="width: auto;">&#x00A0;</dd>
  <dt class="It-tag" style="margin-left: -3.00ex;"><b class="Nm" title="Nm">zfs</b>
    <b class="Cm" title="Cm">receive</b>
    [<span class="Op"><b class="Fl" title="Fl">-FhMnsuv</b></span>]
    [<span class="Op"><b class="Fl" title="Fl">-d</b>|<b class="Fl" title="Fl">-e</b></span>]
    [<span class="Op"><b class="Fl" title="Fl">-o</b>
    <b class="Sy" title="Sy">origin</b>=<var class="Ar" title="Ar">snapshot</var></span>]
    [<span class="Op"><b class="Fl" title="Fl">-o</b>
    <var class="Ar" title="Ar">property</var>=<var class="Ar" title="Ar">value</var></span>]
    [<span class="Op"><b class="Fl" title="Fl">-x</b>
    <var class="Ar" title="Ar">property</var></span>]
    <var class="Ar" title="Ar">filesystem</var></dt>
  <dd class="It-tag">Creates a snapshot whose contents are as specified in the
      stream provided on standard input. If a full stream is received, then a
      new file system is created as well. Streams are created using the
      <b class="Nm" title="Nm">zfs</b> <b class="Cm" title="Cm">send</b>
      subcommand, which by default creates a full stream.
      <b class="Nm" title="Nm">zfs</b> <b class="Cm" title="Cm">recv</b> can be
      used as an alias for <b class="Nm" title="Nm">zfs</b>
      <b class="Cm" title="Cm">receive.</b>
    <div class="Pp"></div>
    If an incremental stream is received, then the destination file system must
      already exist, and its most recent snapshot must match the incremental
      stream's source. For <b class="Sy" title="Sy">zvols</b>, the destination
      device link is destroyed and recreated, which means the
      <b class="Sy" title="Sy">zvol</b> cannot be accessed during the
      <b class="Cm" title="Cm">receive</b> operation.
    <div class="Pp"></div>
    When a snapshot replication package stream that is generated by using the
      <b class="Nm" title="Nm">zfs</b> <b class="Cm" title="Cm">send</b>
      <b class="Fl" title="Fl">-R</b> command is received, any snapshots that do
      not exist on the sending location are destroyed by using the
      <b class="Nm" title="Nm">zfs</b> <b class="Cm" title="Cm">destroy</b>
      <b class="Fl" title="Fl">-d</b> command.
    <div class="Pp"></div>
    The ability to send and receive deduplicated send streams has been removed.
      However, a deduplicated send stream created with older software can be
      converted to a regular (non-deduplicated) stream by using the
      <b class="Nm" title="Nm">zstream</b> <b class="Cm" title="Cm">redup</b>
      command.
    <div class="Pp"></div>
    If <b class="Fl" title="Fl">-o</b>
      <i class="Em" title="Em">property</i>=<var class="Ar" title="Ar">value</var>
      or <b class="Fl" title="Fl">-x</b> <i class="Em" title="Em">property</i>
      is specified, it applies to the effective value of the property throughout
      the entire subtree of replicated datasets. Effective property values will
      be set ( <b class="Fl" title="Fl">-o</b> ) or inherited (
      <b class="Fl" title="Fl">-x</b> ) on the topmost in the replicated
      subtree. In descendant datasets, if the property is set by the send
      stream, it will be overridden by forcing the property to be inherited from
      the top&#x2010;most file system. Received properties are retained in spite
      of being overridden and may be restored with
      <b class="Nm" title="Nm">zfs</b> <b class="Cm" title="Cm">inherit</b>
      <b class="Fl" title="Fl">-S</b>. Specifying
      <b class="Fl" title="Fl">-o</b>
      <b class="Sy" title="Sy">origin</b>=<i class="Em" title="Em">snapshot</i>
      is a special case because, even if <b class="Sy" title="Sy">origin</b> is
      a read-only property and cannot be set, it's allowed to receive the send
      stream as a clone of the given snapshot.
    <div class="Pp"></div>
    Raw encrypted send streams (created with <b class="Nm" title="Nm">zfs</b>
      <b class="Cm" title="Cm">send</b> <b class="Fl" title="Fl">-w</b> ) may
      only be received as is, and cannot be re-encrypted, decrypted, or
      recompressed by the receive process. Unencrypted streams can be received
      as encrypted datasets, either through inheritance or by specifying
      encryption parameters with the <b class="Fl" title="Fl">-o</b> options.
      Note that the <b class="Sy" title="Sy">keylocation</b> property cannot be
      overridden to <b class="Sy" title="Sy">prompt</b> during a receive. This
      is because the receive process itself is already using stdin for the send
      stream. Instead, the property can be overridden after the receive
      completes.
    <div class="Pp"></div>
    The added security provided by raw sends adds some restrictions to the send
      and receive process. ZFS will not allow a mix of raw receives and non-raw
      receives. Specifically, any raw incremental receives that are attempted
      after a non-raw receive will fail. Non-raw receives do not have this
      restriction and, therefore, are always possible. Because of this, it is
      best practice to always use either raw sends for their security benefits
      or non-raw sends for their flexibility when working with encrypted
      datasets, but not a combination.
    <div class="Pp"></div>
    The reason for this restriction stems from the inherent restrictions of the
      AEAD ciphers that ZFS uses to encrypt data. When using ZFS native
      encryption, each block of data is encrypted against a randomly generated
      number known as the &quot;initialization vector&quot; (IV), which is
      stored in the filesystem metadata. This number is required by the
      encryption algorithms whenever the data is to be decrypted. Together, all
      of the IVs provided for all of the blocks in a given snapshot are
      collectively called an &quot;IV set&quot;. When ZFS performs a raw send,
      the IV set is transferred from the source to the destination in the send
      stream. When ZFS performs a non-raw send, the data is decrypted by the
      source system and re-encrypted by the destination system, creating a
      snapshot with effectively the same data, but a different IV set. In order
      for decryption to work after a raw send, ZFS must ensure that the IV set
      used on both the source and destination side match. When an incremental
      raw receive is performed on top of an existing snapshot, ZFS will check to
      confirm that the &quot;from&quot; snapshot on both the source and
      destination were using the same IV set, ensuring the new IV set is
      consistent.
    <div class="Pp"></div>
    The name of the snapshot (and file system, if a full stream is received)
      that this subcommand creates depends on the argument type and the use of
      the <b class="Fl" title="Fl">-d</b> or <b class="Fl" title="Fl">-e</b>
      options.
    <div class="Pp"></div>
    If the argument is a snapshot name, the specified
      <var class="Ar" title="Ar">snapshot</var> is created. If the argument is a
      file system or volume name, a snapshot with the same name as the sent
      snapshot is created within the specified
      <var class="Ar" title="Ar">filesystem</var> or
      <var class="Ar" title="Ar">volume</var>. If neither of the
      <b class="Fl" title="Fl">-d</b> or <b class="Fl" title="Fl">-e</b> options
      are specified, the provided target snapshot name is used exactly as
      provided.
    <div class="Pp"></div>
    The <b class="Fl" title="Fl">-d</b> and <b class="Fl" title="Fl">-e</b>
      options cause the file system name of the target snapshot to be determined
      by appending a portion of the sent snapshot's name to the specified target
      <var class="Ar" title="Ar">filesystem</var>. If the
      <b class="Fl" title="Fl">-d</b> option is specified, all but the first
      element of the sent snapshot's file system path (usually the pool name) is
      used and any required intermediate file systems within the specified one
      are created. If the <b class="Fl" title="Fl">-e</b> option is specified,
      then only the last element of the sent snapshot's file system name (i.e.
      the name of the source file system itself) is used as the target file
      system name.
    <dl class="Bl-tag" style="margin-left: 5.40ex;">
      <dt class="It-tag" style="margin-left: -5.40ex;"><a class="selflink" href="#F"><b class="Fl" title="Fl" id="F">-F</b></a></dt>
      <dd class="It-tag">Force a rollback of the file system to the most recent
          snapshot before performing the receive operation. If receiving an
          incremental replication stream (for example, one generated by
          <b class="Nm" title="Nm">zfs</b> <b class="Cm" title="Cm">send</b>
          <b class="Fl" title="Fl">-R</b>
          [<span class="Op"><b class="Fl" title="Fl">-i</b>|<b class="Fl" title="Fl">-I</b></span>]),
          destroy snapshots and file systems that do not exist on the sending
          side.</dd>
      <dt class="It-tag" style="margin-left: -5.40ex;"><a class="selflink" href="#d"><b class="Fl" title="Fl" id="d">-d</b></a></dt>
      <dd class="It-tag">Discard the first element of the sent snapshot's file
          system name, using the remaining elements to determine the name of the
          target file system for the new snapshot as described in the paragraph
          above.</dd>
      <dt class="It-tag" style="margin-left: -5.40ex;"><a class="selflink" href="#e"><b class="Fl" title="Fl" id="e">-e</b></a></dt>
      <dd class="It-tag">Discard all but the last element of the sent snapshot's
          file system name, using that element to determine the name of the
          target file system for the new snapshot as described in the paragraph
          above.</dd>
      <dt class="It-tag" style="margin-left: -5.40ex;"><a class="selflink" href="#h"><b class="Fl" title="Fl" id="h">-h</b></a></dt>
      <dd class="It-tag">Skip the receive of holds. There is no effect if holds
          are not sent.</dd>
      <dt class="It-tag" style="margin-left: -5.40ex;"><a class="selflink" href="#M"><b class="Fl" title="Fl" id="M">-M</b></a></dt>
      <dd class="It-tag">Force an unmount of the file system while receiving a
          snapshot. This option is not supported on Linux.</dd>
      <dt class="It-tag" style="margin-left: -5.40ex;"><a class="selflink" href="#n"><b class="Fl" title="Fl" id="n">-n</b></a></dt>
      <dd class="It-tag">Do not actually receive the stream. This can be useful
          in conjunction with the <b class="Fl" title="Fl">-v</b> option to
          verify the name the receive operation would use.</dd>
      <dt class="It-tag" style="margin-left: -5.40ex;"><a class="selflink" href="#o"><b class="Fl" title="Fl" id="o">-o</b></a>
        <b class="Sy" title="Sy">origin</b>=<var class="Ar" title="Ar">snapshot</var></dt>
      <dd class="It-tag">Forces the stream to be received as a clone of the
          given snapshot. If the stream is a full send stream, this will create
          the filesystem described by the stream as a clone of the specified
          snapshot. Which snapshot was specified will not affect the success or
          failure of the receive, as long as the snapshot does exist. If the
          stream is an incremental send stream, all the normal verification will
          be performed.</dd>
      <dt class="It-tag" style="margin-left: -5.40ex;"><a class="selflink" href="#o"><b class="Fl" title="Fl" id="o">-o</b></a>
        <i class="Em" title="Em">property</i>=<var class="Ar" title="Ar">value</var></dt>
      <dd class="It-tag">Sets the specified property as if the command
          <b class="Nm" title="Nm">zfs</b> <b class="Cm" title="Cm">set</b>
          <i class="Em" title="Em">property</i>=<var class="Ar" title="Ar">value</var>
          was invoked immediately before the receive. When receiving a stream
          from <b class="Nm" title="Nm">zfs</b>
          <b class="Cm" title="Cm">send</b> <b class="Fl" title="Fl">-R</b>,
          causes the property to be inherited by all descendant datasets, as
          through <b class="Nm" title="Nm">zfs</b>
          <b class="Cm" title="Cm">inherit</b>
          <i class="Em" title="Em">property</i> was run on any descendant
          datasets that have this property set on the sending system.
        <div class="Pp"></div>
        Any editable property can be set at receive time. Set-once properties
          bound to the received data, such as
          <b class="Sy" title="Sy">normalization</b> and
          <b class="Sy" title="Sy">casesensitivity</b>, cannot be set at receive
          time even when the datasets are newly created by
          <b class="Nm" title="Nm">zfs</b> <b class="Cm" title="Cm">receive</b>.
          Additionally both settable properties
          <b class="Sy" title="Sy">version</b> and
          <b class="Sy" title="Sy">volsize</b> cannot be set at receive time.
        <div class="Pp"></div>
        The <b class="Fl" title="Fl">-o</b> option may be specified multiple
          times, for different properties. An error results if the same property
          is specified in multiple <b class="Fl" title="Fl">-o</b> or
          <b class="Fl" title="Fl">-x</b> options.
        <div class="Pp"></div>
        The <b class="Fl" title="Fl">-o</b> option may also be used to override
          encryption properties upon initial receive. This allows unencrypted
          streams to be received as encrypted datasets. To cause the received
          dataset (or root dataset of a recursive stream) to be received as an
          encryption root, specify encryption properties in the same manner as
          is required for <b class="Nm" title="Nm">zfs</b>
          <b class="Cm" title="Cm">create</b>. For instance:
        <div class="Pp"></div>
        <div class="Bd" style="margin-left: 0.00ex;">
        <pre class="Li">
# zfs send tank/test@snap1 | zfs recv -o encryption=on -o keyformat=passphrase -o keylocation=file:///path/to/keyfile
        </pre>
        </div>
        <div class="Pp"></div>
        Note that [<span class="Op"><b class="Fl" title="Fl">-o</b>
          <var class="Ar" title="Ar">keylocation</var>=<var class="Ar" title="Ar">prompt</var></span>]
          may not be specified here, since stdin is already being utilized for
          the send stream. Once the receive has completed, you can use
          <b class="Nm" title="Nm">zfs</b> <b class="Cm" title="Cm">set</b> to
          change this setting after the fact. Similarly, you can receive a
          dataset as an encrypted child by specifying
          [<span class="Op"><b class="Fl" title="Fl">-x</b>
          <var class="Ar" title="Ar">encryption</var></span>] to force the
          property to be inherited. Overriding encryption properties (except for
          <b class="Sy" title="Sy">keylocation</b>) is not possible with raw
          send streams.</dd>
      <dt class="It-tag" style="margin-left: -5.40ex;"><a class="selflink" href="#s"><b class="Fl" title="Fl" id="s">-s</b></a></dt>
      <dd class="It-tag">If the receive is interrupted, save the partially
          received state, rather than deleting it. Interruption may be due to
          premature termination of the stream (e.g. due to network failure or
          failure of the remote system if the stream is being read over a
          network connection), a checksum error in the stream, termination of
          the <b class="Nm" title="Nm">zfs</b>
          <b class="Cm" title="Cm">receive</b> process, or unclean shutdown of
          the system.
        <div class="Pp"></div>
        The receive can be resumed with a stream generated by
          <b class="Nm" title="Nm">zfs</b> <b class="Cm" title="Cm">send</b>
          <b class="Fl" title="Fl">-t</b>
          <var class="Ar" title="Ar">token</var>, where the
          <var class="Ar" title="Ar">token</var> is the value of the
          <b class="Sy" title="Sy">receive_resume_token</b> property of the
          filesystem or volume which is received into.
        <div class="Pp"></div>
        To use this flag, the storage pool must have the
          <b class="Sy" title="Sy">extensible_dataset</b> feature enabled. See
          <a href="../5/zpool-features.5.html" class="Xr">zpool-features(5)</a> for details on ZFS
          feature flags.</dd>
      <dt class="It-tag" style="margin-left: -5.40ex;"><a class="selflink" href="#u"><b class="Fl" title="Fl" id="u">-u</b></a></dt>
      <dd class="It-tag">File system that is associated with the received stream
          is not mounted.</dd>
      <dt class="It-tag" style="margin-left: -5.40ex;"><a class="selflink" href="#v"><b class="Fl" title="Fl" id="v">-v</b></a></dt>
      <dd class="It-tag">Print verbose information about the stream and the time
          required to perform the receive operation.</dd>
      <dt class="It-tag" style="margin-left: -5.40ex;"><a class="selflink" href="#x"><b class="Fl" title="Fl" id="x">-x</b></a>
        <i class="Em" title="Em">property</i></dt>
      <dd class="It-tag">Ensures that the effective value of the specified
          property after the receive is unaffected by the value of that property
          in the send stream (if any), as if the property had been excluded from
          the send stream.
        <div class="Pp"></div>
        If the specified property is not present in the send stream, this option
          does nothing.
        <div class="Pp"></div>
        If a received property needs to be overridden, the effective value will
          be set or inherited, depending on whether the property is inheritable
          or not.
        <div class="Pp"></div>
        In the case of an incremental update, <b class="Fl" title="Fl">-x</b>
          leaves any existing local setting or explicit inheritance unchanged.
        <div class="Pp"></div>
        All <b class="Fl" title="Fl">-o</b> restrictions (e.g. set-once) apply
          equally to <b class="Fl" title="Fl">-x</b>.</dd>
    </dl>
  </dd>
  <dt class="It-tag" style="margin-left: -3.00ex;"><b class="Nm" title="Nm">zfs</b>
    <b class="Cm" title="Cm">receive</b> <b class="Fl" title="Fl">-A</b>
    <var class="Ar" title="Ar">filesystem</var>|<var class="Ar" title="Ar">volume</var></dt>
  <dd class="It-tag">Abort an interrupted <b class="Nm" title="Nm">zfs</b>
      <b class="Cm" title="Cm">receive</b> <b class="Fl" title="Fl">-s</b>,
      deleting its saved partially received state.</dd>
</dl>
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<a href="../8/zfs-send.8.html" class="Xr">zfs-send(8)</a>
  <a href="../8/zstream.8.html" class="Xr">zstream(8)</a></div>
<table class="foot">
  <tr>
    <td class="foot-date">February 16, 2020</td>
    <td class="foot-os">Debian</td>
  </tr>
</table>
</div></div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="zfs-redact.8.html" class="btn btn-neutral float-right" title="zfs-redact.8" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="zfs-receive.8.html" class="btn btn-neutral float-left" title="zfs-receive.8" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, OpenZFS

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>